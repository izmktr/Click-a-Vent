<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Click-a-Vent ヘルプ - 概要</title>
  <link rel="stylesheet" href="help.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>📅 Click-a-Vent ヘルプ</h1>
      <p>Webページの情報を簡単にGoogleカレンダーに追加</p>
    </header>

    <nav>
      <div class="tabs">
        <button class="tab-btn active" data-tab="overview">概要</button>
        <button class="tab-btn" data-tab="popup">ポップアップ画面</button>
        <button class="tab-btn" data-tab="settings">設定画面</button>
      </div>
    </nav>

    <div class="content">
      <!-- 概要タブ -->
      <div class="tab-content active" id="overview">
        <h2>Click-a-Ventとは？</h2>
        <p>
          Click-a-Ventは、Webページ上のイベント情報を簡単にGoogleカレンダーに追加できるChrome拡張機能です。
          セミナー、コンサート、会議など、Webページに掲載されているイベント情報を、わずか数クリックでカレンダーに登録できます。
        </p>

        <h2>主な機能</h2>
        <div class="feature-grid">
          <div class="feature-card">
            <h4>🖱️ クリックで情報取得</h4>
            <p>ページ内の要素をクリックするだけで、イベント名や日時、場所などの情報を自動取得します。</p>
          </div>
          <div class="feature-card">
            <h4>🤖 自動設定機能</h4>
            <p>よく使うWebサイトごとに、どの要素をクリックすべきか事前に設定できます。2回目以降はワンクリックで情報入力が完了します。</p>
          </div>
          <div class="feature-card">
            <h4>📝 柔軟な日時フォーマット</h4>
            <p>「2024年12月25日」「12/25」「2024.12.25」など、様々な日付・時刻形式に対応。独自フォーマットも設定可能です。</p>
          </div>
          <div class="feature-card">
            <h4>⏱️ カスタマイズ可能な期間設定</h4>
            <p>イベントの期間を「30分」「1時間」「2時間」などのボタンで簡単設定。よく使う期間を自分でカスタマイズできます。</p>
          </div>
          <div class="feature-card">
            <h4>📋 履歴機能</h4>
            <p>過去に登録したイベント情報を履歴として保存。同じイベントの再登録や、類似イベントの入力時に便利です。</p>
          </div>
          <div class="feature-card">
            <h4>🔗 URL自動記録</h4>
            <p>イベント登録時に、元のWebページのURLを自動的にカレンダーの説明欄に追加します。</p>
          </div>
        </div>

        <h2>基本的な使い方</h2>
        
        <div class="step">
          <h4>ステップ1: 拡張機能を起動</h4>
          <p>イベント情報が掲載されているWebページで、ツールバーのClick-a-Ventアイコンをクリックします。</p>
        </div>

        <div class="step">
          <h4>ステップ2: 情報を入力</h4>
          <p>「ページから情報を入力」ボタンをクリックし、ページ内の以下の要素を順番にクリックします：</p>
          <ol>
            <li>イベント名（タイトル）</li>
            <li>日付と開始時刻</li>
            <li>場所（オプション）</li>
          </ol>
          <div class="info">
            <p>💡 <strong>ヒント:</strong> 右クリックで項目をスキップできます。必要な情報だけを選択しましょう。</p>
          </div>
        </div>

        <div class="step">
          <h4>ステップ3: 期間を設定</h4>
          <p>イベントの期間（終了時刻までの時間）を選択します。「30分」「1時間」などのボタンから選ぶか、「2h30m」のような形式でカスタム入力できます。</p>
        </div>

        <div class="step">
          <h4>ステップ4: カレンダーに登録</h4>
          <p>内容を確認して「登録」ボタンをクリック。Googleカレンダーが開き、イベントが追加されます。</p>
        </div>

        <div class="note">
          <p>⚠️ <strong>注意:</strong> Googleカレンダーにイベントを追加するには、ブラウザでGoogleアカウントにログインしている必要があります。</p>
        </div>

        <h2>よくある質問</h2>

        <h3>Q: 日付が正しく認識されない</h3>
        <p>A: 設定画面の「日付設定」タブで、該当するフォーマットを追加できます。<code>%Y</code>（年）、<code>%M</code>（月）、<code>%D</code>（日）を使って独自のフォーマットを定義してください。</p>

        <h3>Q: 自動設定を使いたい</h3>
        <p>A: 一度手動で情報を入力した後、ポップアップの通知アイコンから「この設定を保存」を選択します。次回から同じサイトでは自動的に情報が入力されます。</p>

        <h3>Q: 登録したイベントを修正したい</h3>
        <p>A: 登録後、Googleカレンダーが開きます。そこで詳細を編集・修正してください。この拡張機能は登録のみをサポートしています。</p>

        <h3>Q: 拡張機能が動作しない</h3>
        <p>A: 以下をお試しください：</p>
        <ul>
          <li>ページを再読み込みする</li>
          <li>拡張機能を再インストールする</li>
          <li>ブラウザでGoogleカレンダーにアクセスできることを確認する</li>
        </ul>

        <h2>プライバシーとセキュリティ</h2>
        <p>Click-a-Ventは以下の権限のみを使用します：</p>
        <ul>
          <li><strong>アクティブなタブ:</strong> 現在のページから情報を取得するため</li>
          <li><strong>ストレージ:</strong> 設定と履歴を保存するため</li>
          <li><strong>スクリプト実行:</strong> ページ内の要素を選択可能にするため</li>
        </ul>
        <div class="info">
          <p>🔒 設定データはChromeの同期ストレージに保存され、Chromeの同期機能を有効にしている場合はGoogleアカウント経由で同期されます。履歴データはローカルストレージに保存され、デバイス固有です。この拡張機能が独自の外部サーバーにデータを送信することはありません。Googleカレンダーへのイベント追加は、ブラウザの標準URLスキームを使用して行われます。</p>
        </div>

        <h2>サポート</h2>
        <p>問題が発生した場合や機能のリクエストがある場合は、GitHubリポジトリのIssuesセクションでお知らせください。</p>
      </div>

      <!-- ポップアップ画面タブ -->
      <div class="tab-content" id="popup">
        <h2>ポップアップ画面の詳細</h2>
        <p>Click-a-Ventのポップアップ画面は、イベント情報の入力と登録を行うメイン画面です。</p>

        <h2>画面構成</h2>

        <h3>ヘッダー部分</h3>
        <table class="header-icons-table">
          <thead>
            <tr>
              <th>アイコン</th>
              <th>名称</th>
              <th>機能</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><img src="../icons/notice.svg" width="20" height="20" alt="通知"></td>
              <td>自動設定通知</td>
              <td>自動設定が適用された時に表示されます。</td>
            </tr>
            <tr>
              <td><img src="../icons/calendar.svg" width="20" height="20" alt="カレンダー"></td>
              <td>カレンダーを開く</td>
              <td>Googleカレンダーを新しいタブで開きます。</td>
            </tr>
            <tr>
              <td><img src="../icons/setting.svg" width="20" height="20" alt="設定"></td>
              <td>設定</td>
              <td>設定画面を開きます。日付フォーマットや自動設定などを管理できます。</td>
            </tr>
            <tr>
              <td><img src="../icons/help.svg" width="20" height="20" alt="ヘルプ"></td>
              <td>ヘルプ</td>
              <td>このヘルプページを新しいタブで開きます。</td>
            </tr>
          </tbody>
        </table>

        <h3>「ページから情報を入力」ボタン</h3>
        <p>このボタンをクリックすると、ページ内の要素を選択するモードになります。以下の情報を順番に選択します：</p>
        
        <div class="step">
          <h4>1. イベント名</h4>
          <p>イベントのタイトルが記載されている要素をクリックします。クリックした要素のテキストが自動的に取得されます。</p>
        </div>

        <div class="step">
          <h4>2. 日付と開始時刻</h4>
          <p>日付と時刻が記載されている要素をクリックします。認識された日時が自動的に入力されます。</p>
        </div>

        <div class="step">
          <h4>3. 場所（オプション）</h4>
          <p>イベントの開催場所が記載されている要素をクリックします。</p>
        </div>

        <div class="info">
          <p>🖱️ <strong>右クリックでスキップ:</strong> どの段階でも右クリックすることで、その項目をスキップして次に進めます。</p>
        </div>

        <h3>フォーム入力欄</h3>
        
        <h4>イベント名</h4>
        <p>カレンダーに表示されるイベントのタイトルです。自動入力された内容を編集できます。</p>

        <h4>開始日時</h4>
        <p>イベントの開始日時です。datetime-local形式で入力でき、手動での調整も可能です。</p>

        <h4>終了日時</h4>
        <p>イベントの終了日時です。期間ボタンを選択すると、開始日時から自動計算されます。</p>

        <h4>場所</h4>
        <p>イベントの開催場所です。オンラインイベントの場合はURLを入力することもできます。</p>

        <h3>イベント期間ボタン</h3>
        <p>イベントの期間（開始から終了までの時間）を簡単に設定できるボタンです。</p>

        <div class="button-example">0分</div>
        <div class="button-example">10分</div>
        <div class="button-example">30分</div>
        <div class="button-example">1時間</div>
        <div class="button-example">2時間</div>
        <div class="button-example">4時間</div>
        <div class="button-example">8時間</div>

        <p>これらのボタンは設定画面でカスタマイズできます。デフォルトで選択されるボタンも設定可能です。</p>

        <h4>カスタム期間入力</h4>
        <p>ボタンにない期間を指定したい場合は、自由入力欄に直接入力できます。以下の形式をサポートしています：</p>
        <ul>
          <li><code>30m</code> - 30分</li>
          <li><code>1h</code> - 1時間</li>
          <li><code>1h30m</code> - 1時間30分</li>
          <li><code>2h15m</code> - 2時間15分</li>
          <li><code>1d</code> - 1日（24時間）</li>
          <li><code>90s</code> - 90秒</li>
        </ul>

        <div class="info">
          <p>💡 自由入力欄の配置位置（先頭・末尾・非表示）は、設定画面の「期間ボタン」タブで変更できます。</p>
        </div>

        <h3>登録ボタン</h3>
        <p>入力内容を確認し、「登録」ボタンをクリックすると、Googleカレンダーに新しいイベントが追加されます。カレンダーは新しいタブで自動的に開きます。</p>

        <h2>自動設定機能の使い方</h2>
        
        <div class="step">
          <h4>ステップ1: 手動で情報を入力</h4>
          <p>最初は「ページから情報を入力」ボタンを使って、通常通り情報を選択します。</p>
        </div>

        <div class="step">
          <h4>ステップ2: 自動設定通知を確認</h4>
          <p>情報の入力が完了すると、ヘッダーに通知アイコン（🔔）が表示されます。</p>
        </div>

        <div class="step">
          <h4>ステップ3: 設定を保存</h4>
          <p>通知アイコンをクリックし、「この設定を保存」を選択します。現在のURLパターンと選択した要素のセレクタが保存されます。</p>
        </div>

        <div class="step">
          <h4>ステップ4: 次回から自動入力</h4>
          <p>同じWebサイトで拡張機能を開くと、自動的に情報が入力されます。通知からは「自動設定を削除」も選択できます。</p>
        </div>

        <div class="note">
          <p>⚠️ <strong>注意:</strong> Webサイトの構造が変更されると、自動設定が正しく動作しなくなる場合があります。その場合は設定を削除して、再度保存し直してください。</p>
        </div>

        <h2>Tips & ショートカット</h2>
        <ul>
          <li><strong>Escキー:</strong> 要素選択モードをキャンセルして、ポップアップに戻ります</li>
          <li><strong>右クリック:</strong> 現在の選択ステップをスキップします</li>
          <li><strong>履歴から再利用:</strong> 設定画面の「履歴」タブから過去のイベントを選択して、内容を再利用できます</li>
        </ul>
      </div>

      <!-- 設定画面タブ -->
      <div class="tab-content" id="settings">
        <h2>設定画面の詳細</h2>
        <p>設定画面では、Click-a-Ventの動作をカスタマイズできます。ポップアップの⚙️アイコンから開きます。</p>

        <h2>タブ構成</h2>

        <h3>📌 自動設定タブ</h3>
        <p>Webサイトごとの自動設定を管理します。</p>

        <h4>登録済みURL一覧</h4>
        <p>自動設定が保存されているURLのリストが表示されます。URLをクリックすると、詳細が右側のパネルに表示されます。</p>

        <h4>詳細設定</h4>
        <table>
          <thead>
            <tr>
              <th>項目</th>
              <th>説明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>タイトル</td>
              <td>URLリストに表示される名前。イベント名などを設定します。</td>
            </tr>
            <tr>
              <td>URL</td>
              <td>自動設定が適用されるURL。<br>「正規表現を使う」をチェックすると正規表現パターンとして扱い、チェックなしの場合は前方一致でマッチします。</td>
            </tr>
            <tr>
              <td>イベント名のXPath</td>
              <td>イベント名を取得する要素のXPath。</td>
            </tr>
            <tr>
              <td>開始日時のXPath</td>
              <td>開始日時を取得する要素のXPath。</td>
            </tr>
            <tr>
              <td>場所のXPath</td>
              <td>場所情報を取得する要素のXPath。</td>
            </tr>
          </tbody>
        </table>

        <h4>URLテスト機能</h4>
        <p>「URLテスト」ボタンをクリックすると、URLテストセクションが表示されます。テストURLを入力して、設定中のURLパターンにマッチするか確認できます。また、履歴との照合結果も表示されます。</p>

        <h4>ボタン</h4>
        <ul>
          <li><strong>↑/↓:</strong> リスト内での表示順序を変更します。上にある設定ほど優先的にマッチングされます</li>
          <li><strong>新規:</strong> 新しい自動設定を手動で作成します</li>
          <li><strong>削除:</strong> 選択中の自動設定を削除します</li>
          <li><strong>追加/更新:</strong> 設定を保存します（新規作成時は「追加」、編集時は「更新」と表示されます）</li>
          <li><strong>URLテスト:</strong> URLテストセクションの表示/非表示を切り替えます</li>
        </ul>

        <h3>⏱️ 期間ボタンタブ</h3>
        <p>ポップアップに表示される期間ボタンをカスタマイズします。</p>

        <h4>期間ボタンの設定</h4>
        <table>
          <thead>
            <tr>
              <th>項目</th>
              <th>説明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>ボタン名</td>
              <td>ポップアップに表示されるボタンのラベル（例: 「1時間」）。</td>
            </tr>
            <tr>
              <td>期間</td>
              <td>実際の期間を表す文字列（例: 「1h」「30m」「2h30m」）。</td>
            </tr>
            <tr>
              <td>デフォルト</td>
              <td>チェックすると、ポップアップを開いた時にこのボタンが自動選択されます。</td>
            </tr>
          </tbody>
        </table>

        <h4>期間の入力形式</h4>
        <p>期間は以下の単位を組み合わせて指定できます：</p>
        <ul>
          <li><code>s</code> - 秒（例: 90s = 90秒）</li>
          <li><code>m</code> - 分（例: 30m = 30分）</li>
          <li><code>h</code> - 時間（例: 2h = 2時間）</li>
          <li><code>d</code> - 日（例: 1d = 1日 = 24時間）</li>
        </ul>
        <p>組み合わせ例: <code>2h30m</code>（2時間30分）、<code>1d4h</code>（1日4時間）</p>

        <h4>解析結果の表示</h4>
        <p>期間を入力すると、リアルタイムで解析結果が表示されます。正しく認識されているか確認できます。</p>

        <h4>自由入力欄の配置</h4>
        <p>カスタム期間を入力する欄の配置を選択できます：</p>
        <ul>
          <li><strong>先頭:</strong> 期間ボタンの前に表示</li>
          <li><strong>末尾:</strong> 期間ボタンの後に表示（デフォルト）</li>
          <li><strong>非表示:</strong> 自由入力欄を表示しない</li>
        </ul>

        <h3>📅 日付設定タブ</h3>
        <p>日付の抽出に使用するフォーマットを管理します。</p>

        <h4>フォーマットの記法</h4>
        <table>
          <thead>
            <tr>
              <th>記号</th>
              <th>意味</th>
              <th>例</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>%Y</code></td>
              <td>年（2桁または4桁）</td>
              <td>2024、24</td>
            </tr>
            <tr>
              <td><code>%M</code></td>
              <td>月（1桁または2桁）</td>
              <td>1、01、12</td>
            </tr>
            <tr>
              <td><code>%D</code></td>
              <td>日（1桁または2桁）</td>
              <td>5、05、25</td>
            </tr>
          </tbody>
        </table>

        <h4>フォーマット例</h4>
        <ul>
          <li><code>%Y年%M月%D日</code> → 2024年12月25日</li>
          <li><code>%Y/%M/%D</code> → 2024/12/25</li>
          <li><code>%Y.%M.%D</code> → 2024.12.25</li>
          <li><code>%M月%D日</code> → 12月25日（年は現在の年を使用。ただし3ヶ月以上過去の日付は自動的に来年として扱われます）</li>
          <li><code>%M/%D</code> → 12/25</li>
        </ul>

        <div class="info">
          <p>💡 <strong>2桁の年の処理:</strong> 年が2桁の場合、2000年代として解釈されます。例: 26 → 2026、99 → 2099</p>
        </div>

        <div class="info">
          <p>💡 <strong>年省略時の処理:</strong> 年が省略された場合、現在の年を基準にします。ただし、3ヶ月（90日）以上過去の日付の場合は、自動的に来年の日付として扱われます。例：現在が12月で「1月15日」を入力した場合、来年の1月15日になります。</p>
        </div>

        <h4>テスト機能</h4>
        <p>テキストボックスに日付を含む文章を入力すると、登録されているフォーマットでマッチするか確認できます。</p>
        <p>結果には、マッチした部分、使用されたフォーマット、抽出された日付が表示されます。</p>

        <h4>ボタン</h4>
        <ul>
          <li><strong>登録:</strong> フォーマットを保存します</li>
          <li><strong>テスト:</strong> 入力したテキストで日付抽出をテストします</li>
          <li><strong>デフォルトに戻す:</strong> デフォルトのフォーマット一覧に戻します</li>
        </ul>

        <h3>🕐 時刻設定タブ</h3>
        <p>時刻の抽出に使用するフォーマットを管理します。</p>

        <h4>フォーマットの記法</h4>
        <table>
          <thead>
            <tr>
              <th>記号</th>
              <th>意味</th>
              <th>例</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>%P</code></td>
              <td>午前/午後</td>
              <td>午前、午後、AM、PM</td>
            </tr>
            <tr>
              <td><code>%H</code></td>
              <td>時（1桁または2桁）</td>
              <td>9、09、14</td>
            </tr>
            <tr>
              <td><code>%M</code></td>
              <td>分（1桁または2桁）</td>
              <td>0、05、30</td>
            </tr>
          </tbody>
        </table>

        <h4>フォーマット例</h4>
        <ul>
          <li><code>%H:%M</code> → 14:30</li>
          <li><code>%H時%M分</code> → 14時30分</li>
          <li><code>%P%H:%M</code> → 午後2:30</li>
          <li><code>%P%H時%M分</code> → 午後2時30分</li>
          <li><code>%H:%M %P</code> → 2:30 PM</li>
        </ul>

        <div class="note">
          <p>💡 <strong>分の省略:</strong> %Mを省略したフォーマットも使用できます。その場合、分は0として扱われます。</p>
        </div>

        <h4>テスト機能</h4>
        <p>日付設定と同様に、テキストボックスで時刻抽出のテストができます。</p>

        <h3>📜 履歴タブ</h3>
        <p>過去に登録したイベントの履歴を確認できます。</p>

        <h4>履歴の表示</h4>
        <p>登録日時の新しい順に、イベント情報が表示されます。各項目には以下の情報が含まれます：</p>
        <ul>
          <li>イベント名</li>
          <li>開始日時</li>
          <li>場所</li>
          <li>登録元のURL</li>
        </ul>

        <h4>履歴の活用</h4>
        <p>履歴項目をクリックすると、その情報がポップアップに読み込まれます。同じイベントを再登録する場合や、類似イベントの入力時に便利です。</p>

        <h4>履歴に正規表現として追加</h4>
        <p>このチェックボックスをONにすると、履歴から自動設定を作成する際に、URLを正規表現として保存します。</p>

        <div class="info">
          <p>💡 <strong>活用例:</strong> 定期的に開催されるイベントシリーズなど、URL構造が似ている複数のページで使い回したい場合に便利です。</p>
        </div>

        <h2>設定のバックアップ</h2>
        <p>Chrome の設定同期機能を使用している場合、Click-a-Vent の設定も自動的に同期されます。</p>
        <ul>
          <li>自動設定</li>
          <li>日付・時刻フォーマット</li>
          <li>期間ボタン設定</li>
          <li>各種表示設定</li>
        </ul>

        <div class="note">
          <p>⚠️ <strong>注意:</strong> 履歴データは同期されません。ローカルストレージに保存され、デバイス固有です。</p>
        </div>

        <h2>設定のリセット</h2>
        <p>各タブの「デフォルトに戻す」ボタンで、その項目の設定を初期状態に戻せます。完全にリセットしたい場合は、拡張機能を再インストールしてください。</p>
      </div>
    </div>

    <footer>
      <p>&copy; 2024 Click-a-Vent. All rights reserved.</p>
      <p><a href="https://github.com/izmktr/Click-a-Vent" target="_blank">GitHub Repository</a></p>
    </footer>
  </div>

  <script src="help.js"></script>
</body>
</html>
